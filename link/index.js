const { Storage } = require('@google-cloud/storage');
const storage = new Storage();
const maliciousBucket = storage.bucket('cit412-malware-malicious-pdf');
const benignBucket = storage.bucket('cit412-malware-benign-pdf');

exports.getFileCounts = async (req, res) => {
  try {
    const [maliciousFiles] = await maliciousBucket.getFiles();
    const [benignFiles] = await benignBucket.getFiles();

    const maliciousCount = maliciousFiles.length;
    const benignCount = benignFiles.length;

    res.status(200).send({ maliciousCount, benignCount });
  } catch (error) {
    console.error('Error fetching file counts:', error);
    res.status(500).send('Internal Server Error');
  }
};
